<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TaskSnacks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <!-- Top bar: About + Refresh (always visible) -->
    <div class="top-bar">
      <button id="aboutBtn" class="about-btn" type="button">
        About TaskSnacks
      </button>
      <button id="refreshBtn" class="cute-refresh" type="button">
        Refresh
      </button>
    </div>

    <h1>TaskSnacks</h1>
    <p class="subtitle">
      Dump your messy thoughts. Get clear tasks. Earn a fun fact reward.
    </p>

    <!-- Auth section -->
    <div id="authSection">
      <input id="emailInput" type="email" placeholder="Email" />
      <input id="passwordInput" type="password" placeholder="Password" />
      <button id="signupBtn" type="button">Sign up</button>
      <button id="loginBtn" type="button">Log in</button>
      <button id="logoutBtn" type="button" style="display:none;">Log out</button>
      <p id="authStatus" class="auth-status"></p>
    </div>
<!-- About section shown only when logged out -->
<div id="loggedOutInfo" class="logged-out-info" style="display:none;">
  <h2>Welcome to TaskSnacks</h2>
  <p>
    Most productivity apps are packed with boards, labels, and complicated workflows.
    TaskSnacks takes a different approach. It is built for people with busy schedules,
    creative minds, or anyone who simply wants a calmer way to stay organized.
  </p>
  <p>
    Just write your thoughts naturally. You can type fast, messy, out of order, with
    spelling mistakes, it does not matter. TaskSnacks uses AI to instantly turn your
    brain-dump into a small list of structured, clear tasks.
  </p>
  <p>
    Each time you complete a task, you receive a small fun fact. It is a gentle,
    dopamine-friendly reward that helps you stay motivated without pressure.
  </p>
  <p>
    Sign up to experience a lighter, simpler way of planning your day.
  </p>
</div>
    
    <!-- Everything below is only visible when logged in -->
    <div id="appContent" style="display:none;">

      <!-- Calendar -->
      <div id="calendarSection" class="calendar-section">
        <div class="calendar-header">
          <button id="prevMonthBtn" type="button">‹</button>
          <span id="calendarMonthLabel" class="calendar-month-label">Month Year</span>
          <button id="nextMonthBtn" type="button">›</button>
        </div>
        <div id="calendarGrid" class="calendar-grid"></div>
      </div>

      <!-- Sort controls -->
      <div id="sortSection" class="sort-section">
        <label for="sortMode">Sort tasks:</label>
        <select id="sortMode">
          <option value="priority">By importance (High → Low)</option>
          <option value="custom">My order</option>
          <option value="created">By creation time</option>
        </select>
      </div>

      <!-- Hidden date input used by JS -->
      <input id="taskDate" type="date" style="display:none;" />

      <!-- Brain dump -->
      <textarea
        id="brainDump"
        placeholder="Type everything on your mind..."
      ></textarea>
      <button id="organizeBtn" type="button">Organize My Mess</button>

      <!-- Manual add -->
      <div id="manualAddSection" class="manual-add">
        <input
          id="manualTaskInput"
          type="text"
          placeholder="Add a task manually..."
        />
        <button id="manualAddBtn" type="button">Add</button>
      </div>

      <!-- Tasks + fun fact -->
      <div id="tasksContainer"></div>
      <div id="funFactContainer" class="fun-fact"></div>

      <!-- Ko-fi (kept but hidden for now) -->
      <div class="coffee" style="display:none;">
        <a href="https://ko-fi.com/tasksnacks" target="_blank" rel="noopener">
          Support TaskSnacks
        </a>
      </div>

      <!-- Undo bar for delete -->
      <div id="undoBar" class="undo-bar">
        <span id="undoText">Task deleted</span>
        <button id="undoBtn" type="button">Undo</button>
      </div>
    </div> <!-- /#appContent -->
  </div> <!-- /.container -->
  
<!-- Account settings (visible only when logged in) -->
<div id="accountSettings" class="account-settings">
  <h2>Your account</h2>
  <p class="account-note">
    You can delete your account and all your tasks. This action cannot be undone.
  </p>
  <button id="deleteAccountBtn" type="button" class="danger-btn">
    Delete my account
  </button>
</div>
  
  <!-- About modal (visible whether logged in or not) -->
  <div id="aboutModal" class="modal hidden">
    <div id="aboutBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="aboutCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>About TaskSnacks</h2>
      <p>
        Most to-do apps are cluttered with boards, tags, and settings. They expect you
        to be organized before you can get organized. TaskSnacks was created for people
        who have busy minds, ADHD brains, or just too much going on.
      </p>
      <p>
        Instead of forcing you to structure everything, TaskSnacks lets you brain-dump
        your entire day in natural language. You can write however you think, with
        spelling mistakes, half sentences, or scattered ideas. The built-in AI turns
        that messy text into 3–7 clear, ordered tasks that match the flow of your day.
      </p>
      <p>
        Preparation steps come before the main action. Morning tasks come before
        afternoon and evening tasks. You see only what actually matters for today.
      </p>
      <p>
        To keep motivation high, each completed task triggers a small fun-fact reward.
        It is a gentle, dopamine-friendly nudge that makes finishing tasks feel a bit
        more satisfying, without turning your day into a game.
      </p>
      <p>
        Right now TaskSnacks is in an early refinement stage: the core loop is stable
        and we are collecting feedback, improving mobile interactions, and polishing
        the overall experience. The goal is simple: a calm, friendly tool that helps
        you move from mental clutter to clear action, one small task at a time.
      </p>
    </div>
  </div>

  <!-- Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <!-- Your app logic -->
  <script src="script.js"></script>
</body>
</html>
