<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TaskSnacks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  
  <meta property="og:title" content="TaskSnacks" />
  <meta property="og:description" content="Turn messy thoughts into clear tasks." />
  <meta property="og:image" content="https://www.tasksnacks.com/og-image.png" />
  <meta property="og:url" content="https://www.tasksnacks.com" />
  <meta property="og:type" content="website" />

  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="ts-app" data-theme="dark">
  
  <div class="theme-stage" aria-hidden="true"></div>

  <div class="container app-shell">
    
    <nav class="top-bar">
      <div class="brand-area">
        <img src="favicon.png" alt="Logo" class="nav-logo">
        <span class="brand-name">TaskSnacks</span>
      </div>

      <div class="top-bar-right">
        <!-- Logged-out actions (simple landing header) -->
        <div id="navLoggedOut" class="nav-actions nav-actions-logged-out">
          <button id="themeToggleBtn" class="icon-btn theme-toggle" type="button" aria-label="Switch theme">
            ðŸŒ™
          </button>
          <button id="aboutBtn" class="btn-text" type="button" aria-label="About TaskSnacks">About TaskSnacks</button>
        </div>

        <!-- Logged-in actions (shown after auth by script.js) -->
        <div id="navLoggedIn" class="nav-actions nav-actions-logged-in" style="display:none;">
          <button id="refreshBtn" class="icon-btn" type="button" aria-label="Refresh">
            â†»
          </button>
          <button id="openGameBtn" class="icon-btn game-btn" type="button" aria-label="Play Game">
            ðŸŽ®
          </button>

          <div class="settings-wrapper">
            <button id="settingsBtn" class="icon-btn settings-btn" type="button">âš™</button>
            <div id="settingsMenu" class="settings-menu hidden">
              <div class="divider"></div>
              <button id="changePasswordBtn" type="button" class="settings-item">Change password</button>
              <button id="deleteAccountBtn" type="button" class="settings-item danger-item">Delete account</button>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <header class="hero" aria-label="Hero">
      <div id="loggedOutLanding" class="landing-shell">
        <div id="authSection" class="auth-container">
        <h1 class="hero-title">Clear your mind.</h1>
        <p class="subtitle">Turn chaos into tasks.</p>
        
        <div class="auth-controls">
          <input id="emailInput" type="email" placeholder="Email address" class="auth-input" />
          <input id="passwordInput" type="password" placeholder="Password" class="auth-input" />
          
          <div class="auth-buttons">
            <button id="loginBtn" type="button" class="btn btn-primary">Log in</button>
            <button id="signupBtn" type="button" class="btn btn-secondary">Sign up</button>
          </div>
        </div>
        
        <div id="passwordResetSection" style="display:none;" class="auth-reset-box">
          <p>Set a new password</p>
          <input id="newPasswordInput" type="password" placeholder="New password" />
          <button id="setNewPasswordBtn" type="button" class="btn btn-primary">Update</button>
        </div>
        </div>
        <div class="landing-vision" aria-label="TaskSnacks vision">
          <p class="landing-vision-text">TaskSnacks helps you get things done â€” brain dump your day, then let AI turn it into clear tasks.</p>
        </div>
      </div>
    </header>

    <div id="appContent" class="app-main" style="display:none;">
      
      <div class="app-grid-layout">
        
        <aside class="layout-col-left">
          
          <section class="user-profile-card">
             <div class="profile-content">
               <p id="authStatus" class="profile-email"></p>
               <button id="logoutBtn" type="button" class="btn-xs btn-outline">Log out</button>
             </div>
          </section>

          <section id="calendarSection" class="card card-calendar">
            <div class="card-header">
              <div class="calendar-nav">
                <button id="prevMonthBtn" type="button" class="nav-arrow">â€¹</button>
                <span id="calendarMonthLabel" class="calendar-label">Month</span>
                <button id="nextMonthBtn" type="button" class="nav-arrow">â€º</button>
              </div>
              <button id="calendarToggleBtn" type="button" class="btn-text">Hide</button>
            </div>
            <div id="calendarGrid" class="calendar-grid"></div>
            <input id="taskDate" type="date" style="display:none;" />
          </section>

          <section id="manualAddSection" class="card card-quick">
            <div class="quick-add-wrapper">
              <input id="manualTaskInput" type="text" placeholder="Add a specific task..." />
              <button id="manualAddBtn" type="button" class="btn-icon-add">+</button>
            </div>
          </section>

          <section class="card card-brain">
            <div class="card-header">
              <h3>Brain Dump</h3>
              <span class="badge-ai">AI Powered</span>
            </div>
            <textarea id="brainDump" placeholder="What's on your mind? Don't worry about structure..."></textarea>
            <button id="organizeBtn" type="button" class="btn btn-primary btn-block btn-magic">
              âœ¨ Organize My Mess
            </button>
          </section>

        </aside>

        <main class="layout-col-right">
          
          <div class="list-header">
            <h2 class="list-title">Your Tasks</h2>
            <section id="sortSection" class="sort-controls">
              <select id="sortMode" class="sort-select">
                <option value="created">Time Created</option>
                <option value="priority">Priority (High â†’ Low)</option>
                <option value="custom">My Order</option>
              </select>
            </section>
          </div>

          <section class="tasks-wrapper">
            <div id="tasksContainer" class="tasks-list"></div>
            
            <div id="funFactContainer" class="fun-fact-box"></div>
            
            <button id="moveUnfinishedBtn" class="btn btn-ghost btn-block">
              Move unfinished tasks to tomorrow â†’
            </button>
          </section>

        </main>
      </div>
    </div> 

    <div id="loggedOutInfo" class="logged-out-info" style="display:none;"></div> 

  </div> <div id="aboutModal" class="modal hidden">
    <div id="aboutBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="aboutCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>About TaskSnacks</h2>
      <div class="modal-content-scroll">
        <p>Most to-do apps are cluttered. TaskSnacks is for busy minds.</p>
        <p>Brain dump your day, and let AI structure it for you.</p>
      </div>
    </div>
  </div>

  <div id="deleteModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="deleteCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>Delete Account</h2>
      <p>Type <strong>DELETE</strong> to confirm.</p>
      <input id="deleteConfirmInput" type="text" placeholder="DELETE" class="modal-input" />
      <button id="finalDeleteBtn" type="button" class="btn btn-danger" disabled>Confirm Delete</button>
    </div>
  </div>

  <div id="goodbyeModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <h2>Goodbye ðŸ‘‹</h2>
    </div>
  </div>

  <div id="gameModal" class="modal hidden" aria-hidden="true">
    <div id="gameBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog game-dialog">
      <div class="game-top">
        <span class="game-title">Break Run</span>
        <button id="closeGameBtn" class="btn-icon" type="button">âœ•</button>
      </div>
      
      <div class="game-body" style="position: relative;">
        <canvas id="taskSnacksGame"></canvas>
        
        <div id="gameStartOverlay" class="game-overlay">
          <div class="overlay-content">
            <h3>How to Play</h3>
            <ul class="game-instructions">
              <li><span class="key-hint">Tap / Space</span> <strong>JUMP</strong> over Yellow obstacles ðŸš§</li>
              <li><span class="key-hint">K / Down</span> <strong>KICK</strong> Red enemies ðŸ‘¹</li>
              <li>Collect <strong>Coffee â˜•</strong> for Flow State (Invincible!)</li>
            </ul>
            <button id="startGameBtn" class="btn btn-primary btn-large">START RUN â–¶</button>
          </div>
        </div>

        <div class="game-mobile-controls">
          <button id="mobileJumpBtn" class="btn btn-primary">JUMP</button>
          <button id="mobileKickBtn" class="btn btn-secondary">KICK</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <script src="game-embed.js"></script>
  <script src="script.js"></script>

  <footer class="ts-footer">
    <img src="favicon.png" alt="TaskSnacks Logo" class="ts-footer-logo" />
    <span>Â© 2026 TaskSnacks</span>
    <span class="footer-email">
      Contact: <a href="mailto:tasksnacks@protonmail.com">tasksnacks@protonmail.com</a>
    </span>
  </footer>
  <div id="undoBar" class="undo-bar"></div>
</body>
</html>
