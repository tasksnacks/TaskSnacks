<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TaskSnacks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <button id="aboutBtn" class="about-btn" type="button">
        About TaskSnacks
      </button>

      <div class="top-bar-right">
        <button id="refreshBtn" class="cute-refresh" type="button">
          Refresh
        </button>

        <div class="settings-wrapper">
          <button id="settingsBtn" class="settings-btn" type="button">
            âš™
          </button>

          <div id="settingsMenu" class="settings-menu hidden">
            <button id="changePasswordBtn" type="button" class="settings-item">
              Change my password
            </button>
            <button id="deleteAccountBtn" type="button" class="settings-item danger-item">
              Delete my account
            </button>
          </div>
        </div>
      </div>
    </div>

    <h1>TaskSnacks</h1>
    <p class="subtitle">
      Dump your messy thoughts. Get clear tasks. Earn a fun fact reward.
    </p>

    <div id="authSection">
      <input id="emailInput" type="email" placeholder="Email" />
      <input id="passwordInput" type="password" placeholder="Password" />
      <button id="signupBtn" type="button">Sign up</button>
      <button id="loginBtn" type="button">Log in</button>
      <button id="logoutBtn" type="button" style="display:none;">Log out</button>
      <p id="authStatus" class="auth-status"></p>
    </div>
    
    <div id="passwordResetSection" style="display:none; margin-top:16px;">
      <p>Set a new password for your TaskSnacks account.</p>
      <input
        id="newPasswordInput"
        type="password"
        placeholder="New password"
        style="margin-top:8px; padding:8px; border-radius:8px; border:1px solid #e5e7eb; width:100%; max-width:260px;"
      />
      <button id="setNewPasswordBtn" type="button" style="margin-top:8px;">
        Update password
      </button>
    </div>
    
    <div id="loggedOutInfo" class="logged-out-info" style="display:none;">
      <h2>Welcome to TaskSnacks</h2>
      <p>
        Most productivity apps are packed with boards, labels, and complicated workflows.
        TaskSnacks takes a different approach. It is built for people with busy schedules,
        creative minds, or anyone who simply wants a calmer way to stay organized.
      </p>
      <p>
        Just write your thoughts naturally. You can type fast, messy, out of order, with
        spelling mistakes, it does not matter. TaskSnacks uses AI to instantly turn your
        brain-dump into a small list of structured, clear tasks.
      </p>
      <p>
        Each time you complete a task, you receive a small fun fact. It is a gentle,
        dopamine-friendly reward that helps you stay motivated without pressure.
      </p>
      <p>
        Sign up to experience a lighter, simpler way of planning your day.
      </p>
    </div>
    
    <div id="appContent" style="display:none;">

      <div id="calendarSection" class="calendar-section">
        <div class="calendar-header">
          <button id="prevMonthBtn" type="button">â€¹</button>
          
          <span id="calendarMonthLabel" class="calendar-month-label clickable-label">
            Month Year 
            <span id="calChevron" class="chevron">â–¼</span>
          </span>
          
          <button id="nextMonthBtn" type="button">â€º</button>
        </div>
        <div id="calendarGrid" class="calendar-grid collapsed"></div>
      </div>

      <div id="sortSection" class="sort-section">
        <label for="sortMode">Sort tasks:</label>
        <select id="sortMode">
          <option value="priority">By importance (High â†’ Low)</option>
          <option value="custom">My order</option>
          <option value="created">By creation time</option>
        </select>
      </div>

      <input id="taskDate" type="date" style="display:none;" />

      <textarea
        id="brainDump"
        placeholder="Type everything on your mind..."
      ></textarea>
      <button id="organizeBtn" type="button">Organize My Mess</button>

      <div id="manualAddSection" class="manual-add">
        <input
          id="manualTaskInput"
          type="text"
          placeholder="Add a task manually..."
        />
        <button id="manualAddBtn" type="button">Add</button>
      </div>

      <div id="tasksContainer"></div>
      <div id="funFactContainer" class="fun-fact"></div>

      <div id="undoBar" class="undo-bar">
        <span id="undoText">Task deleted</span>
        <button id="undoBtn" type="button">Undo</button>
      </div>
    </div> </div> <div id="aboutModal" class="modal hidden">
    <div id="aboutBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="aboutCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>About TaskSnacks</h2>
      <p>
        Most to-do apps are cluttered with boards, tags, and settings. They expect you
        to be organized before you can get organized. TaskSnacks was created for people
        who have busy minds, ADHD brains, or just too much going on.
      </p>
      <p>
        Instead of forcing you to structure everything, TaskSnacks lets you brain-dump
        your entire day in natural language. You can write however you think, with
        spelling mistakes, half sentences, or scattered ideas. The built-in AI turns
        that messy text into 3â€“7 clear, ordered tasks that match the flow of your day.
      </p>
      <p>
        To keep motivation high, each completed task triggers a small fun-fact reward.
        It is a gentle, dopamine-friendly nudge that makes finishing tasks feel a bit
        more satisfying, without turning your day into a game.
      </p>
    </div>
  </div>

  <div id="deleteModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="deleteCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>Delete your account</h2>
      <p>
        This will permanently delete your TaskSnacks account and all your tasks.
        This action cannot be undone.
      </p>
      <p style="margin-top:8px;">
        Type <strong>DELETE</strong> to confirm.
      </p>
      <input
        id="deleteConfirmInput"
        type="text"
        placeholder="Type DELETE to confirm"
        style="margin-top:8px; width:100%; padding:8px; border-radius:8px; border:1px solid #e5e7eb;"
      />
      <button
        id="finalDeleteBtn"
        type="button"
        class="danger-item"
        style="margin-top:12px;"
        disabled
      >
        Delete my account
      </button>
    </div>
  </div>

  <div id="goodbyeModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <h2>Goodbye ðŸ‘‹</h2>
      <p>
        Your account and all your data have been deleted.
        See you another time.
      </p>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
