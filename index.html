<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TaskSnacks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <button id="aboutBtn" class="about-btn" type="button">
        About TaskSnacks
      </button>

      <div class="top-bar-right">
        <button id="refreshBtn" class="cute-refresh" type="button">
          Refresh
        </button>

        <div class="settings-wrapper">
          <button id="settingsBtn" class="settings-btn" type="button">
            âš™
          </button>
          <div id="settingsMenu" class="settings-menu hidden">
            <button id="changePasswordBtn" type="button" class="settings-item">
              Change my password
            </button>
            <button id="deleteAccountBtn" type="button" class="settings-item danger-item">
              Delete my account
            </button>
          </div>
        </div>
      </div>
    </div>

    <h1>TaskSnacks</h1>
    <p class="subtitle">
      Dump your messy thoughts. Get clear tasks. Earn a fun little reward.
    </p>

    <div id="appContent" style="display:none;"> <div id="calendarSection" class="calendar-section">
        <div class="calendar-header">
          <button id="prevMonthBtn" type="button">â€¹</button>
          <span id="calendarMonthLabel" class="calendar-month-label clickable-label">
            Month Year <span id="calChevron" class="chevron">â–¼</span>
          </span>
          <button id="nextMonthBtn" type="button">â€º</button>
        </div>
        <div id="calendarGrid" class="calendar-grid collapsed"></div>
      </div>

      <div id="sortSection" class="sort-section">
        <label for="sortMode">Sort tasks:</label>
        <select id="sortMode">
          <option value="priority">By importance (High â†’ Low)</option>
          <option value="custom">My order</option>
          <option value="created">By creation time</option>
        </select>
      </div>

      <input id="taskDate" type="date" style="display:none;" />

      <textarea
        id="brainDump"
        placeholder="Type everything on your mind..."
      ></textarea>

      <p id="tryAIPreviewHint" class="try-ai-hint" style="display:none;">
        âœ¨ <strong>Try it free!</strong> Type your messy thoughts above and tap "Organize My Mess" to see the magic. No account needed.
      </p>

      <button id="organizeBtn" type="button">Organize My Mess</button>

      <div id="manualAddSection" class="manual-add">
        <input
          id="manualTaskInput"
          type="text"
          placeholder="Add a task manually..."
        />
        <button id="manualAddBtn" type="button">Add</button>
      </div>

      <div id="tasksContainer"></div>
      <div id="funFactContainer" class="fun-fact"></div>

      <div id="undoBar" class="undo-bar">
        <span id="undoText">Task deleted</span>
        <button id="undoBtn" type="button">Undo</button>
      </div>
    </div> 
    <div id="authContainer" class="login-card-wrapper">
      <div id="authSection">
        <p class="login-prompt">Save your tasks & sync across devices:</p>
        <input id="emailInput" type="email" placeholder="Email" />
        <input id="passwordInput" type="password" placeholder="Password" />
        <div class="auth-buttons">
          <button id="signupBtn" type="button">Sign up</button>
          <button id="loginBtn" type="button">Log in</button>
        </div>
        <button id="logoutBtn" type="button" style="display:none;">Log out</button>
        <p id="authStatus" class="auth-status"></p>
      </div>
      
      <div id="passwordResetSection" style="display:none; margin-top:16px;">
        <p>Set a new password for your TaskSnacks account.</p>
        <input id="newPasswordInput" type="password" placeholder="New password" class="full-width-input"/>
        <button id="setNewPasswordBtn" type="button" style="margin-top:8px;">Update password</button>
      </div>
    </div>

    <div id="loggedOutInfo" class="logged-out-info" style="display:none;">
      <h2>Welcome to TaskSnacks</h2>
      <p>
        Most productivity apps are packed with boards, labels, and complicated workflows.
        TaskSnacks takes a different approach. It is built for people with busy schedules,
        creative minds, or anyone who simply wants a calmer way to stay organized.
      </p>
      <p>
        Write messy. Get clarity. Earn a smile.
      </p>
    </div>
  </div> <div id="aboutModal" class="modal hidden">
    <div id="aboutBackdrop" class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="aboutCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>About TaskSnacks</h2>
      <p>TaskSnacks turns your brain dumps into clear tasks using AI.</p>
      <p>No boards. No stress. Just clarity.</p>
    </div>
  </div>

  <div id="deleteModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <button id="deleteCloseBtn" class="modal-close" type="button">&times;</button>
      <h2>Delete your account</h2>
      <p>Type <strong>DELETE</strong> to confirm.</p>
      <input id="deleteConfirmInput" type="text" placeholder="Type DELETE" class="full-width-input" />
      <button id="finalDeleteBtn" type="button" class="danger-item" style="margin-top:12px;" disabled>
        Delete my account
      </button>
    </div>
  </div>

  <div id="goodbyeModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <h2>Goodbye ðŸ‘‹</h2>
      <p>Your account has been deleted.</p>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
